**Elicit a log-normal distribution from most common value and 95% (or selected) quantile value of distribution**
  
(This file is best viewed outside of Dark Mode for equation visibility)  
  
The distribution of some variable <a href="https://www.codecogs.com/eqnedit.php?latex=X" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X" title="X" /></a> is log-normal if the distribution <a href="https://www.codecogs.com/eqnedit.php?latex=Y=log\left&space;(&space;X&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y=log\left&space;(&space;X&space;\right&space;)" title="Y=log\left ( X \right )" /></a> is distributed normally. A log-normal distribution is characterized by a skewed bell-shaped curve peaking at some relatively lower-value within the range of all values, with a long tail extending into relatively high-values. The resulting distribution cuts across several orders of magnitude (e.g. hundreds, thousands, tens of thousands, and millions). The distribution of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a> has all properties of a normal, while <a href="https://www.codecogs.com/eqnedit.php?latex=X" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X" title="X" /></a> has the property of being positive-definite (i.e. there are no negative values of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a> has all properties of a normal, while <a href="https://www.codecogs.com/eqnedit.php?latex=X" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X" title="X" /></a>, since <a href="https://www.codecogs.com/eqnedit.php?latex=X=e^{Y}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X=e^{Y}" title="X=e^{Y}" /></a> and <a href="https://www.codecogs.com/eqnedit.php?latex=e" target="_blank"><img src="https://latex.codecogs.com/svg.latex?e" title="e" /></a> is a positive value).  
  
These properties make the log-normal distribution very attractive for describing quantities in risk like losses, incidents of loss-events, etc – these are positive-definite quantities whose value may cut across several orders of magnitude. But the way a log-normal is defined is by its parameters in <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a>-space, the mean and standard deviation of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a>. These parameters are not easily elicited from a knowledge-expert on the quantity being modeled.  
  
In the absence of some large amount of data on the quantity that can be used to estimate these parameters, it would be useful if we could take parameters that are easily elicited from a knowledge-expert and translate them into the parameters used to define the log-normal distribution. We will accomplish this by making use of two more approachable parameters:  
  
1) The mode of the distribution, representing the most common value of the quantity  
2) A chosen quantile of the distribution, representing a high value of <a href="https://www.codecogs.com/eqnedit.php?latex=X" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X" title="X" /></a> that has a probability of exceedance defined by the knowledge-expert (Default quantile is 95%, meaning that the probability of exceedance is 5%, but the quantile probability can be selected by the user if desired).
  
There exists a single log-normal distribution that satisfies these two parameters, with a (anticipated to be unique) mean and standard deviation of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a>. We will solve for the unknown parameters using the technique outlined below.  
  
Let’s define the terms we have discussed so far. Let:  
<a href="https://www.codecogs.com/eqnedit.php?latex=\mu" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\mu" title="\mu" /></a> = the mean of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a> (unknown)  
<a href="https://www.codecogs.com/eqnedit.php?latex=\sigma" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\sigma" title="\sigma" /></a> = the standard deviation of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a>  (unknown)  
<a href="https://www.codecogs.com/eqnedit.php?latex=X_{mode}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X_{mode}" title="X_{mode}" /></a> = the mode of <a href="https://www.codecogs.com/eqnedit.php?latex=X" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X" title="X" /></a> (elicited)  
<a href="https://www.codecogs.com/eqnedit.php?latex=X_{quant}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?X_{quant}" title="X_{quant}" /></a> = the quantile value of <a href="https://www.codecogs.com/eqnedit.php?latex=X" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X" title="X" /></a> (elicited)  
  
We will make use of 2 equations relating the log-normal parameters to the elicited parameters. First, the mode of the distribution is related to the unknown parameters as:  
  
(1) <a href="https://www.codecogs.com/eqnedit.php?latex=X_{mode}=e^{\mu&space;-\sigma&space;^{2}}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X_{mode}=e^{\mu&space;-\sigma&space;^{2}}" title="X_{mode}=e^{\mu -\sigma ^{2}}" /></a>  
  
Second, the <a href="https://www.codecogs.com/eqnedit.php?latex=P_{quant}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?P_{quant}" title="P_{quant}" /></a> quantile of the distribution, <a href="https://www.codecogs.com/eqnedit.php?latex=X_{quant}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?X_{quant}" title="X_{quant}" /></a>, is related to the unknown parameters as:  
  
(2) <a href="https://www.codecogs.com/eqnedit.php?latex=X_{quant}=q_{LN}\left&space;(&space;P_{quant}&space;\right&space;)=e^{\mu&space;&plus;&space;\sigma&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?X_{quant}=q_{LN}\left&space;(&space;P_{quant}&space;\right&space;)=e^{\mu&space;&plus;&space;\sigma&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)}" title="X_{quant}=q_{LN}\left ( P_{quant} \right )=e^{\mu + \sigma q_{N}\left ( P_{quant} \right )}" /></a>  
  
Where <a href="https://www.codecogs.com/eqnedit.php?latex=q_{LN}\left&space;(&space;P_{quant}&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?q_{LN}\left&space;(&space;P_{quant}&space;\right&space;)" title="q_{LN}\left ( P_{quant} \right )" /></a> is the quantile of the log-normal, and <a href="https://www.codecogs.com/eqnedit.php?latex=q_{N}\left&space;(&space;P_{quant}&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?q_{N}\left&space;(&space;P_{quant}&space;\right&space;)" title="q_{N}\left ( P_{quant} \right )" /></a> is the quantile of a standard normal distribution, evaluated at the same quantile probability <a href="https://www.codecogs.com/eqnedit.php?latex=P_{quant}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?P_{quant}" title="P_{quant}" /></a>.  
  
Since <a href="https://www.codecogs.com/eqnedit.php?latex=q_{N}\left&space;(&space;P_{quant}&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/svg.latex?q_{N}\left&space;(&space;P_{quant}&space;\right&space;)" title="q_{N}\left ( P_{quant} \right )" /></a> is an easily computed quantity, these two equations have two unknowns, making the system solvable. We will solve for σ by combining equations as <a href="https://www.codecogs.com/eqnedit.php?latex=log\left&space;(&space;eqn.1&space;\right&space;)-log\left&space;(&space;eqn.2&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/svg.latex?log\left&space;(&space;eqn.1&space;\right&space;)-log\left&space;(&space;eqn.2&space;\right&space;)" title="log\left ( eqn.1 \right )-log\left ( eqn.2 \right )" /></a>:  
  
(3) <a href="https://www.codecogs.com/eqnedit.php?latex=log\left&space;(&space;X_{mode}&space;\right&space;)-log\left&space;(&space;X_{quant}&space;\right&space;)=\mu&space;-&space;\sigma^{2}&space;-&space;\mu&space;-&space;\sigma&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?log\left&space;(&space;X_{mode}&space;\right&space;)-log\left&space;(&space;X_{quant}&space;\right&space;)=\mu&space;-&space;\sigma^{2}&space;-&space;\mu&space;-&space;\sigma&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)" title="log\left ( X_{mode} \right )-log\left ( X_{quant} \right )=\mu - \sigma^{2} - \mu - \sigma q_{N}\left ( P_{quant} \right )" /></a>  
  
Which can be rearranged into the following quadratic equation:  
  
(4) <a href="https://www.codecogs.com/eqnedit.php?latex=\sigma^{2}&plus;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\sigma&space;&plus;&space;log\left&space;(&space;X_{mode}&space;\right&space;)-log\left&space;(&space;X_{quant}&space;\right&space;)=0" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\sigma^{2}&plus;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\sigma&space;&plus;&space;log\left&space;(&space;X_{mode}&space;\right&space;)-log\left&space;(&space;X_{quant}&space;\right&space;)=0" title="\sigma^{2}+q_{N}\left ( P_{quant} \right ) \sigma + log\left ( X_{mode} \right )-log\left ( X_{quant} \right )=0" /></a>  
  
This quadratic polynomial has two roots, each defining a solution for <a href="https://www.codecogs.com/eqnedit.php?latex=\sigma" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\sigma" title="\sigma" /></a>, defined by the quadratic equation as:  
  
(5) <a href="https://www.codecogs.com/eqnedit.php?latex=\sigma=\frac{-q_{N}\left&space;(&space;P_{quant}&space;\right&space;)\pm&space;\sqrt{q_{N}\left&space;(&space;P_{quant}&space;\right&space;)^{2}-4*\left&space;(&space;log\left&space;(&space;X_{mode}&space;\right&space;)-log\left&space;(&space;X_{quant}&space;\right&space;)&space;\right&space;)}}{2}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\sigma=\frac{-q_{N}\left&space;(&space;P_{quant}&space;\right&space;)\pm&space;\sqrt{q_{N}\left&space;(&space;P_{quant}&space;\right&space;)^{2}-4*\left&space;(&space;log\left&space;(&space;X_{mode}&space;\right&space;)-log\left&space;(&space;X_{quant}&space;\right&space;)&space;\right&space;)}}{2}" title="\sigma=\frac{-q_{N}\left ( P_{quant} \right )\pm \sqrt{q_{N}\left ( P_{quant} \right )^{2}-4*\left ( log\left ( X_{mode} \right )-log\left ( X_{quant} \right ) \right )}}{2}" /></a>  
  
The roots can be positive, negative, or complex. We anticipate that there exists only one positive real root, representing the only physical solution (since the standard deviation of <a href="https://www.codecogs.com/eqnedit.php?latex=Y" target="_blank"><img src="https://latex.codecogs.com/svg.latex?Y" title="Y" /></a> must be positive and real). The code will account for the possibility that there exist two positive real roots, which would result in two solutions, though one of them may have an unphysical <a href="https://www.codecogs.com/eqnedit.php?latex=\mu" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\mu" title="\mu" /></a> and may be excluded. It is also possible that there are no positive real roots, in which case the system is not solvable which may be due to poorly defined  <a href="https://www.codecogs.com/eqnedit.php?latex=X_{mode}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X_{mode}" title="X_{mode}" /></a> and <a href="https://www.codecogs.com/eqnedit.php?latex=X_{quant}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?X_{quant}" title="X_{quant}" /></a> values - e.g. a negative <a href="https://www.codecogs.com/eqnedit.php?latex=X_{mode}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?X_{mode}" title="X_{mode}" /></a>, or <a href="https://www.codecogs.com/eqnedit.php?latex=X_{quant}<&space;X_{mode}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?X_{quant}<&space;X_{mode}" title="X_{quant}< X_{mode}" /></a>.  
  
Assuming a positive real value for σ is found, we can combine equations as <a href="https://www.codecogs.com/eqnedit.php?latex=q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;log\left&space;(&space;eqn.1&space;\right&space;)&plus;\sigma&space;log\left&space;(&space;eqn.2&space;\right&space;)" target="_blank"><img src="https://latex.codecogs.com/gif.latex?q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;log\left&space;(&space;eqn.1&space;\right&space;)&plus;\sigma&space;log\left&space;(&space;eqn.2&space;\right&space;)" title="q_{N}\left ( P_{quant} \right ) log\left ( eqn.1 \right )+\sigma log\left ( eqn.2 \right )" /></a>:  
  
(6) <a href="https://www.codecogs.com/eqnedit.php?latex=q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;log\left&space;(&space;X_{mode}&space;\right&space;)&plus;\sigma&space;log\left&space;(&space;X_{quant}&space;\right&space;)=q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\mu&space;-&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\sigma^{2}&space;&plus;&space;\sigma&space;\mu&space;&plus;&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\sigma^{2}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;log\left&space;(&space;X_{mode}&space;\right&space;)&plus;\sigma&space;log\left&space;(&space;X_{quant}&space;\right&space;)=q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\mu&space;-&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\sigma^{2}&space;&plus;&space;\sigma&space;\mu&space;&plus;&space;q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;\sigma^{2}" title="q_{N}\left ( P_{quant} \right ) log\left ( X_{mode} \right )+\sigma log\left ( X_{quant} \right )=q_{N}\left ( P_{quant} \right ) \mu - q_{N}\left ( P_{quant} \right ) \sigma^{2} + \sigma \mu + q_{N}\left ( P_{quant} \right ) \sigma^{2}" /></a>  
  
Which can be simplified to a solution for <a href="https://www.codecogs.com/eqnedit.php?latex=\mu" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\mu" title="\mu" /></a> as:  
  
(7) <a href="https://www.codecogs.com/eqnedit.php?latex=\mu&space;=&space;\frac{q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;log\left&space;(&space;X_{mode}&space;\right&space;)&space;&plus;&space;\sigma&space;log\left&space;(&space;X_{quant}&space;\right&space;)}{q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;&plus;&space;\sigma}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\mu&space;=&space;\frac{q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;log\left&space;(&space;X_{mode}&space;\right&space;)&space;&plus;&space;\sigma&space;log\left&space;(&space;X_{quant}&space;\right&space;)}{q_{N}\left&space;(&space;P_{quant}&space;\right&space;)&space;&plus;&space;\sigma}" title="\mu = \frac{q_{N}\left ( P_{quant} \right ) log\left ( X_{mode} \right ) + \sigma log\left ( X_{quant} \right )}{q_{N}\left ( P_{quant} \right ) + \sigma}" /></a>  
  
With <a href="https://www.codecogs.com/eqnedit.php?latex=eqn.5" target="_blank"><img src="https://latex.codecogs.com/svg.latex?eqn.5" title="eqn.5" /></a> and <a href="https://www.codecogs.com/eqnedit.php?latex=eqn.7" target="_blank"><img src="https://latex.codecogs.com/svg.latex?eqn.7" title="eqn.7" /></a> solving the system.